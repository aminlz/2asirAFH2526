<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Fine-Tuning Qwen2 – FútbolAl</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #f8fafc;
      --bg-card: #ffffff;
      --accent: #f97316;
      --accent-soft: #fed7aa;
      --text: #111827;
      --text-muted: #6b7280;
      --border: #e2e8f0;
      --border-hover: #fb923c;
      --bg-gradient: linear-gradient(135deg, #fef3c7 0%, #fed7aa 50%, #fb923c 100%);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #f1f5f9 0%, #e2e8f0 70%, #cbd5e1 100%);
      color: var(--text);
      line-height: 1.7;
    }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }

    header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: var(--bg-gradient);
      color: #7c2d12;
      box-shadow: 0 6px 16px rgba(249,115,22,0.25);
    }
    .header-inner {
      max-width: 1100px;
      margin: 0 auto;
      padding: 1.1rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }
    .logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    .logo-icon {
      width: 34px;
      height: 34px;
      border-radius: 12px;
      background: radial-gradient(circle at 30% 30%, #ffffff, #fed7aa);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.9rem;
      color: #dc2626;
      box-shadow: 0 4px 12px rgba(249,115,22,0.4);
    }
    .logo-text {
      display: flex;
      flex-direction: column;
      gap: 0.1rem;
    }
    .logo-text span:first-child {
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-size: 0.8rem;
    }
    .logo-text span:last-child {
      font-size: 0.75rem;
      color: #92400e;
    }
    nav {
      display: flex;
      gap: 1.2rem;
      font-size: 0.85rem;
    }
    nav a {
      color: #7c2d12;
      opacity: 0.9;
      font-weight: 500;
    }
    nav a:hover {
      opacity: 1;
      color: #b45309;
    }

    main {
      max-width: 1100px;
      margin: 2rem auto 3rem;
      padding: 0 1.5rem 3rem;
    }

    .hero {
      margin-bottom: 3rem;
      text-align: left;
      background: rgba(254,243,199,0.3);
      padding: 2rem;
      border-radius: 1rem;
      border: 1px solid rgba(249,115,22,0.2);
    }
    .hero-title {
      font-size: clamp(2rem, 3.1vw, 2.7rem);
      font-weight: 800;
      letter-spacing: -0.03em;
      color: #7c2d12;
      margin-bottom: 0.4rem;
    }
    .hero-sub {
      color: var(--text-muted);
      max-width: 40rem;
      margin-bottom: 1.2rem;
      font-size: 1.05rem;
    }

    .section-title {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.6rem;
      color: #111827;
      background: var(--bg-gradient);
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      box-shadow: 0 4px 12px rgba(249,115,22,0.2);
    }

    .capture {
      margin-bottom: 2.5rem;
      background: var(--bg-card);
      border-radius: 1.2rem;
      padding: 1.5rem;
      border: 1px solid var(--border);
      box-shadow: 0 20px 40px rgba(15,23,42,0.08);
      transition: all 0.3s ease;
    }
    .capture:hover {
      transform: translateY(-4px);
      box-shadow: 0 25px 50px rgba(15,23,42,0.12);
    }
    .capture-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 0.5rem;
      margin-bottom: 1rem;
      border-bottom: 2px solid rgba(249,115,22,0.3);
      padding-bottom: 0.6rem;
    }
    .capture-title {
      font-size: 1rem;
      font-weight: 700;
      color: #7c2d12;
    }
    .capture-tagline {
      font-size: 0.82rem;
      color: var(--text-muted);
      font-style: italic;
    }

    .capture-image-wrapper {
      margin-bottom: 1.2rem;
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      border-radius: 1rem;
      padding: 1rem;
      border: 2px solid var(--border);
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .capture-image {
      border-radius: 0.8rem;
      border: 2px solid transparent;
      overflow: hidden;
      transition: all 0.25s ease;
      background: #111827;
      max-width: 100%;
      max-height: 400px;
      width: auto;
      height: auto;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    .capture-image img {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: contain;  /* MUESTRA IMAGEN COMPLETA SIN RECORTES */
      object-position: center;
    }
    .capture-image:hover {
      border-color: var(--accent);
      box-shadow: 0 20px 40px rgba(249,115,22,0.25);
      transform: scale(1.02);
    }

    .capture-body {
      font-size: 0.95rem;
      color: var(--text);
      background: linear-gradient(135deg, #fef7ff 0%, #f0f9ff 100%);
      padding: 1.5rem;
      border-radius: 0.8rem;
      border-left: 4px solid var(--accent);
      line-height: 1.75;
    }
    .capture-body p {
      margin-bottom: 0.8rem;
    }
    .capture-body code {
      background: rgba(249,115,22,0.15);
      padding: 0.15rem 0.4rem;
      border-radius: 6px;
      font-family: 'Monaco', monospace;
      font-size: 0.88em;
      color: #7c2d12;
    }
    .capture-body strong {
      color: #b45309;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-bottom: 1rem;
    }
    .pill {
      font-size: 0.78rem;
      padding: 0.2rem 0.65rem;
      border-radius: 999px;
      background: var(--accent-soft);
      color: #7c2d12;
      border: 1px solid rgba(249,115,22,0.4);
      font-weight: 600;
    }

    footer {
      border-top: 2px solid rgba(249,115,22,0.3);
      background: var(--bg-gradient);
      color: #92400e;
      font-size: 0.85rem;
      padding: 1.5rem 1.5rem 2rem;
      margin-top: 3rem;
    }
    .footer-inner {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    @media (max-width: 768px) {
      .header-inner { flex-direction: column; align-items: flex-start; }
      nav { width: 100%; justify-content: flex-start; flex-wrap: wrap; margin-top: 0.5rem; }
      main { padding-inline: 1rem; }
      .capture { padding: 1.2rem; }
      .capture-body { padding: 1.2rem; font-size: 0.92rem; }
      .capture-image { max-height: 300px; }
    }
  </style>
</head>
<body>

<header>
  <div class="header-inner">
    <div class="logo">
      <div class="logo-icon">FA</div>
      <div class="logo-text">
        <span>Fine-Tuning</span>
        <span>FútbolAl · Documentación Técnica</span>
      </div>
    </div>
    <nav>
      <a href="#intro">Inicio</a>
      <a href="#capturas">Capturas</a>
    </nav>
  </div>
</header>

<main>
  <section class="hero" id="intro">
    <h1 class="hero-title">Fine-Tuning Qwen2 con Unsloth</h1>
    <p class="hero-sub">
      Documentación completa del proceso en RTX 4070 Ti - De los logs finales hasta FútbolAl listo para chat
    </p>
  </section>

  <section id="capturas">
    <h2 class="section-title">Secuencia de capturas</h2>

    <!-- Captura 1: image3.png -->
    <article class="capture">
      <div class="capture-header">
        <div class="capture-title">Captura 1 · Logs Finales</div>
        <div class="capture-tagline">Métricas finales del entrenamiento Qwen2</div>
      </div>
      <div class="capture-image-wrapper">
        <div class="capture-image">
          <img src="image3.png" alt="Logs finales fine-tuning Qwen2 Unsloth" />
        </div>
      </div>
      <div class="capture-body">
        <div class="pill-row">
          <span class="pill">loss 0.0131</span>
          <span class="pill">RTX 4070 Ti</span>
          <span class="pill">Torch 2.5.1</span>
          <span class="pill">epoch 50</span>
        </div>
        <p>Esta captura inicial muestra los logs finales del proceso de fine-tuning de un modelo Qwen2 usando Unsloth en una NVIDIA GeForce RTX 4070 Ti bajo Windows con Torch 2.5.1 y CUDA 12.1. Cada línea registra métricas clave por paso: <strong>'loss'</strong> (pérdida, que mide el error del modelo y baja de 0.0151 a 0.0131, indicando convergencia exitosa), <strong>'grad_norm'</strong> (norma del gradiente, que controla la estabilidad del descenso de gradiente, manteniéndose baja ~0.04-0.17), <strong>'learning_rate'</strong> (tasa de aprendizaje, decreciendo linealmente de 2.3e-05 a 2.1e-06 para evitar oscilaciones finales) y <strong>'epoch'</strong> (avance hasta la época 50.0). Al final, resume <code>train_runtime (95.6s)</code>, samples/steps por segundo, <code>train_loss global (0.308)</code> y confirma 50 épocas completadas.</p>
        <hr />
      </div>
    </article>

    <!-- Captura 2: image4.png -->
    <article class="capture">
      <div class="capture-header">
        <div class="capture-title">Captura 2 · Barra Progreso</div>
        <div class="capture-tagline">SFT completado al 100%</div>
      </div>
      <div class="capture-image-wrapper">
        <div class="capture-image">
          <img src="image4.png" alt="Barra de progreso SFT 100%" />
        </div>
      </div>
      <div class="capture-body">
        <div class="pill-row">
          <span class="pill">SFT 100%</span>
          <span class="pill">1.05it/s</span>
          <span class="pill">Unsloth 2026.2.1</span>
          <span class="pill">bfloat16</span>
        </div>
        <p>Aquí aparece la barra de progreso al 100% (100/100 steps en 1:35 a 1.05it/s), indicando finalización del entrenamiento supervisado (SFT). Unsloth (versión 2026.2.1) parchea automáticamente 28 capas QKV (Query-Key-Value para atención) y MLP (perceptrones multicapa) del modelo base Qwen2, optimizando para velocidad 2x con 70% menos memoria. Carga shards del checkpoint y habilita <code>bfloat16</code> para precisión eficiente en GPU (11.99GB usados de 1 GPU).</p>
        <hr />
      </div>
    </article>

    <!-- Captura 3: image1.png -->
    <article class="capture">
      <div class="capture-header">
        <div class="capture-title">Captura 3 · Fusión LoRA</div>
        <div class="capture-tagline">Adaptador LoRA fusionado al modelo base</div>
      </div>
      <div class="capture-image-wrapper">
        <div class="capture-image">
          <img src="image1.png" alt="Fusión LoRA PEFT" />
        </div>
      </div>
      <div class="capture-body">
        <div class="pill-row">
          <span class="pill">LoRA 1%</span>
          <span class="pill">4-bit quant</span>
          <span class="pill">futbol_model_merged</span>
          <span class="pill">PEFT</span>
        </div>
        <p>Esta sección detalla la fusión del adaptador LoRA (Low-Rank Adaptation, que entrena solo ~1% de parámetros para eficiencia) al modelo base en 4-bit quantization, generando <code>./futbol_model_merged</code>. La advertencia de PEFT (Parameter-Efficient Fine-Tuning) advierte sobre posibles diferencias en generaciones por errores de redondeo en capas lineales bnb (bitsandbytes). Finaliza con cierre de PowerShell en entorno venv (virtualenv), confirmando guardado listo para inferencia.</p>
        <hr />
      </div>
    </article>

    <!-- Captura 4: image2.png -->
    <article class="capture">
      <div class="capture-header">
        <div class="capture-title">Captura 4 · Interfaz Launcher</div>
        <div class="capture-tagline">FútbolAl en LM Studio/Ollama</div>
      </div>
      <div class="capture-image-wrapper">
        <div class="capture-image">
          <img src="image2.png" alt="Launcher preset Fútbol" />
        </div>
      </div>
      <div class="capture-body">
        <div class="pill-row">
          <span class="pill">FútbolAl</span>
          <span class="pill">51 tokens</span>
          <span class="pill">LM Studio</span>
          <span class="pill">Ready</span>
        </div>
        <p> El editor de system prompt define "FútbolAl" como un experto en táctica, historia, reglamento, análisis de partidos y estadísticas, con instrucciones para respuestas precisas y apasionadas (51 tokens). Incluye opciones como "Save/Discard", <code>Ctrl+E</code> para editar y barras de carga al 100%, preparando el modelo fusionado para chat interactivo sobre fútbol.</p>
        <hr />
      </div>
    </article>

    <!-- Captura 5: image5.png -->
    <article class="capture">
      <div class="capture-header">
        <div class="capture-title">Captura 5 · System Prompt</div>
        <div class="capture-tagline">Editor Ctrl+E del prompt FútbolAl</div>
      </div>
      <div class="capture-image-wrapper">
        <div class="capture-image">
          <img src="image5.png" alt="Editor system prompt FútbolAl" />
        </div>
      </div>
      <div class="capture-body">
        <div class="pill-row">
          <span class="pill">System Prompt</span>
          <span class="pill">Ctrl+E</span>
          <span class="pill">Save/Discard</span>
          <span class="pill">51 tokens</span>
        </div>
      <p><strong>Editor del system prompt:</strong> "Eres FútbolAl, experto en táctica, historia, reglamento, análisis partidos y stats. Respondes precisa y apasionadamente". <strong>El modelo ya está en producción respondiendo perfectamente</strong> a preguntas específicas de fútbol, demostrando que el fine-tuning LoRA ha sido completamente exitoso y el conocimiento del dataset está correctamente integrado.</p>
      </div>
    </article>
  </section>
</main>

<footer>
  <div class="footer-inner">
    <span>© 2026 · Fine-Tuning Qwen2 · FútbolAl</span>
    <span>RTX 4070 Ti · Unsloth v2026.2.1 · LoRA + PEFT</span>
  </div>
</footer>

</body>
</html>
